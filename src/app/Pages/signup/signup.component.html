<app-navbar></app-navbar>
<div class="container ">
  <div class="row align-items-center ">
    <!-- القسم الأيسر للصورة -->
    <div class="col-md-6">
      <div class="logo d-flex justify-content-center">
        <img class="w-75"src="assets/images/logo2.png" alt="Logo">
      </div>
    </div>

    <!-- القسم الأيمن للفورم -->
    <div class="col-md-6">
      <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" class="inputs d-flex flex-column justify-content-center">
        <div class="text text-center mb-4">
          <p class="fs-1">إنشاء حساب جديد</p>
          <p class="fs-2">مرحبًا بك! أنشئ حسابك وابدأ رحلتك معنا.</p>
        </div>

        <!-- البريد الإلكتروني -->
        <div>
          <label for="email">البريد الإلكتروني</label>
          <input type="email" class="form-control rounded-5 " id="email" formControlName="email" />
          @if (signupForm.get('email')?.invalid && signupForm.get('email')?.touched) {
            @if (signupForm.get('email')?.hasError('required')) {
              <small class="text-danger">البريد الإلكتروني مطلوب.</small>
            }
            @if (signupForm.get('email')?.hasError('email')) {
              <small class="text-danger">البريد الإلكتروني غير صحيح.</small>
            }
          }
        </div>

        <!-- اسم العرض -->
        <div>
          <label for="firstName">الاسم الاول</label>
          <input type="text" class="form-control rounded-5 " id="firstName" formControlName="firstName" />
          @if (signupForm.get('displayName')?.invalid && signupForm.get('displayName')?.touched) {
            @if (signupForm.get('displayName')?.hasError('required')) {
              <small class="text-danger">اسم المستخدم مطلوب.</small>
            }
          }
        </div>

        <div>
          <label for="lastName">الاسم الاخير</label>
          <input type="text" class="form-control rounded-5 " id="lastName" formControlName="lastName" />
          @if (signupForm.get('displayName')?.invalid && signupForm.get('displayName')?.touched) {
            @if (signupForm.get('displayName')?.hasError('required')) {
              <small class="text-danger">اسم المستخدم مطلوب.</small>
            }
          }
        </div>

        <!-- رقم الهاتف -->
        <div>
          <label for="phoneNumber">الهاتف/الواتساب</label>
          <input type="text" class="form-control rounded-5 " id="phoneNumber" formControlName="phoneNumber" />
          @if (signupForm.get('phoneNumber')?.invalid && signupForm.get('phoneNumber')?.touched) {
            @if (signupForm.get('phoneNumber')?.hasError('required')) {
              <small class="text-danger">رقم الهاتف مطلوب.</small>
            }
            @if (signupForm.get('phoneNumber')?.hasError('pattern')) {
              <small class="text-danger">الرقم غير صحيح. يجب أن يكون مكونًا من 11 رقمًا.</small>
            }
          }
        </div>

        <!-- كلمة المرور -->
        <div>
          <label for="password">كلمة المرور</label>
          <input type="password" class="form-control rounded-5 " id="password" formControlName="password" />
          @if (signupForm.get('password')?.invalid && signupForm.get('password')?.touched) {
            @if (signupForm.get('password')?.hasError('required')) {
              <small class="text-danger">كلمة المرور مطلوبة.</small>
            }
            @if (signupForm.get('password')?.hasError('minlength')) {
              <small class="text-danger">كلمة المرور يجب أن تكون على الأقل 6 أحرف.</small>
            }
          }
        </div>

        <!-- تأكيد كلمة المرور -->
        <div>
          <label for="confirmPassword">تأكيد كلمة المرور</label>
          <input type="password" class="form-control rounded-5 " id="confirmPassword" formControlName="confirmPassword" />
          @if (signupForm.hasError('mismatch') && signupForm.get('confirmPassword')?.touched) {
            <small class="text-danger">كلمات المرور غير متطابقة.</small>
          }
        </div>


        <!-- اختيار الدور -->
        <div class="d-flex justify-content-between mt-4 ">
          <div class="btn-group w-100 mb-3" role="group" aria-label="اختيار الدور">
            <input type="radio" class="btn-check" name="role" value="Patient" id="rolePatient"
                   formControlName="role" autocomplete="off" />
            <label class="btn btn-outline-primary fs-5 rounded-5 me-2 mx-2" for="rolePatient">مريض</label>
          
            <input type="radio" class="btn-check" name="role" value="Doctor" id="roleDoctor"
                   formControlName="role" autocomplete="off" />
            <label class="btn btn-outline-primary fs-5 rounded-5" for="roleDoctor">طبيب</label>
          </div>
          
        </div>

        @if (signupForm.get('role')?.invalid && signupForm.get('role')?.touched) {
          <small class="text-danger">يرجى اختيار الدور (مريض أو طبيب).</small>
        }

        <!-- الشروط والأحكام -->
        <div>
          <label for="acceptTerms">
            <input type="checkbox" formControlName="acceptTerms" />
            أوافق على الشروط والأحكام
          </label>
          <a target="_blank" class="mx-2" href="https://github.com/">اقرأ الشروط والأحكام</a>
          @if (signupForm.get('acceptTerms')?.invalid && signupForm.get('acceptTerms')?.touched) {
            <small class="text-danger">يجب قبول الشروط والأحكام.</small>
            
          }
        </div>

        <!-- زر الاشتراك -->
        <button type="submit" class="btn btn-primary rounded-5 m-4" [disabled]="signupForm.invalid">الاشتراك</button>

        <!-- رسالة الخطأ العامة -->
        @if (errorMessage) {
          <div class="alert alert-danger mt-3">
            {{ errorMessage }}
          </div>
        }
      </form>
    </div>
  </div>
</div>
